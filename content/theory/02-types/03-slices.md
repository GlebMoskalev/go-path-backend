---
title: "Массивы и слайсы"
description: "Фиксированные массивы, динамические слайсы, append, copy, срезы"
order: 3
---

# Массивы и слайсы

## Массивы

Массив — коллекция фиксированной длины с элементами одного типа.

```go
var a [3]int           // [0, 0, 0]
b := [3]string{"Go", "Java", "Rust"}
c := [...]int{1, 2, 3} // длина определяется автоматически
```

Длина массива — часть его типа. `[3]int` и `[5]int` — разные типы.

```go
fmt.Println(len(a)) // 3
```

## Слайсы

Слайс — динамическая обёртка над массивом. Это основная коллекция в Go.

```go
s := []int{1, 2, 3}
fmt.Println(len(s)) // 3 — длина
fmt.Println(cap(s)) // 3 — ёмкость
```

### Создание через make

```go
s := make([]int, 5)     // длина 5, ёмкость 5
s := make([]int, 0, 10) // длина 0, ёмкость 10
```

## Добавление элементов

```go
s := []int{1, 2, 3}
s = append(s, 4)         // [1, 2, 3, 4]
s = append(s, 5, 6, 7)  // [1, 2, 3, 4, 5, 6, 7]
```

### Объединение слайсов

```go
a := []int{1, 2}
b := []int{3, 4}
a = append(a, b...)  // [1, 2, 3, 4]
```

## Срезы (slicing)

```go
s := []int{0, 1, 2, 3, 4, 5}

s[1:4]  // [1, 2, 3]     — от 1 (вкл.) до 4 (искл.)
s[:3]   // [0, 1, 2]     — от начала до 3
s[2:]   // [2, 3, 4, 5]  — от 2 до конца
s[:]    // [0, 1, 2, 3, 4, 5] — копия ссылки
```

> **Важно:** срез ссылается на тот же массив. Изменения в срезе изменят оригинал.

```go
original := []int{1, 2, 3}
slice := original[0:2]
slice[0] = 99
fmt.Println(original) // [99, 2, 3]
```

## Копирование

```go
src := []int{1, 2, 3}
dst := make([]int, len(src))
copy(dst, src)

dst[0] = 99
fmt.Println(src) // [1, 2, 3] — не изменился
```

## Удаление элемента

```go
s := []int{1, 2, 3, 4, 5}
i := 2 // удаляем элемент с индексом 2

s = append(s[:i], s[i+1:]...) // [1, 2, 4, 5]
```

## Перебор

```go
nums := []int{10, 20, 30}

for i, v := range nums {
    fmt.Printf("%d: %d\n", i, v)
}
```

## Nil-слайс vs пустой слайс

```go
var s1 []int          // nil-слайс: s1 == nil, len = 0
s2 := []int{}         // пустой слайс: s2 != nil, len = 0
s3 := make([]int, 0)  // пустой слайс

// Оба работают одинаково с append:
s1 = append(s1, 1) // [1]
s2 = append(s2, 1) // [1]
```

> **Совет:** для JSON-ответов используйте `[]int{}` вместо `nil`-слайса, чтобы получить `[]` вместо `null`.
